{"version":3,"sources":["../src/index.js"],"names":["module","exports","context","req","dbName","collectionName","dbUsername","dbPassword","response","uri","client","mongodb","MongoClient","connect","useNewUrlParser","collection","db","method","find","limit","toArray","res","insertOne","body","ops","deleteOne","_id","ObjectId","JSON","stringify"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAeC,OAAf,EAAwBC,GAAxB,EAA6B;AAC5C,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,cAAc,GAAG,EAArB;AACA,MAAIC,UAAU,GAAG,EAAjB;AACA,MAAIC,UAAU,GAAG,EAAjB;AACA,MAAIC,QAAJ;AACA,QAAMC,GAAG,GAAI,iBAAgBH,UAAW,IAAGC,UAAW,8DAAtD;AACA,MAAIG,MAAM,GAAG,MAAMC,iBAAQC,WAAR,CAAoBC,OAApB,CAA4BJ,GAA5B,EAAiC;AAClDK,IAAAA,eAAe,EAAE;AADiC,GAAjC,CAAnB;AAGA,MAAIC,UAAU,GAAG,MAAML,MAAM,CAACM,EAAP,CAAUZ,MAAV,EAAkBW,UAAlB,CAA6BV,cAA7B,CAAvB;;AACA,MAAIF,GAAG,CAACc,MAAJ,KAAe,KAAnB,EAA0B;AACxBT,IAAAA,QAAQ,GAAG,MAAMO,UAAU,CACxBG,IADc,GAEdC,KAFc,CAER,EAFQ,EAGdC,OAHc,EAAjB;AAID,GALD,MAKO,IAAIjB,GAAG,CAACc,MAAJ,KAAe,MAAnB,EAA2B;AAChC,QAAII,GAAG,GAAG,MAAMN,UAAU,CAACO,SAAX,CAAqBnB,GAAG,CAACoB,IAAzB,CAAhB;AACAf,IAAAA,QAAQ,GAAGa,GAAG,CAACG,GAAJ,CAAQ,CAAR,CAAX;AACD,GAHM,MAGA,IAAIrB,GAAG,CAACc,MAAJ,KAAe,KAAnB,EAA0B,CAChC,CADM,MACA;AACLT,IAAAA,QAAQ,GAAG,MAAMO,UAAU,CAACU,SAAX,CAAqB;AACpCC,MAAAA,GAAG,EAAE,IAAIf,iBAAQgB,QAAZ,CAAqBxB,GAAG,CAACoB,IAAJ,CAASG,GAA9B;AAD+B,KAArB,CAAjB;AAGD;;AACDxB,EAAAA,OAAO,CAACmB,GAAR,GAAc;AACZE,IAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAerB,QAAf;AADM,GAAd;AAGD,CA5BD","sourcesContent":["import mongodb from 'mongodb';\n\nmodule.exports = async function(context, req) {\n  let dbName = '';\n  let collectionName = '';\n  let dbUsername = '';\n  let dbPassword = '';\n  let response;\n  const uri = `mongodb+srv://${dbUsername}:${dbPassword}@cluster0-ysdpk.mongodb.net/test?retryWrites=true&w=majority`;\n  let client = await mongodb.MongoClient.connect(uri, {\n    useNewUrlParser: true\n  });\n  let collection = await client.db(dbName).collection(collectionName);\n  if (req.method === 'GET') {\n    response = await collection\n      .find()\n      .limit(10)\n      .toArray();\n  } else if (req.method === 'POST') {\n    let res = await collection.insertOne(req.body);\n    response = res.ops[0];\n  } else if (req.method === 'PUT') {\n  } else {\n    response = await collection.deleteOne({\n      _id: new mongodb.ObjectId(req.body._id)\n    });\n  }\n  context.res = {\n    body: JSON.stringify(response)\n  };\n};\n"],"file":"index.js"}